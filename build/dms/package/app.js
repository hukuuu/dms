/*
 * File: app.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.2.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

// //@require @packageOverrides
// Ext.Loader.setConfig({

// });

Ext.application({
    requires: [
       'Ext.MessageBox' 
    ],

    models: [
        'BaseModel',
        'SmsCountModel'
    ],
    stores: [
        'PeopleStore',
        'OthersStore',
        'OrganizationsStore',
        'SmsCountStore'
    ],
    views: [
        'CategoriesTabPanel',
        'PeopleContainer',
        'OrganizationsContainer',
        'OthersContainer',
        'HistoryContainer',
        'MainView'
    ],
    controllers: [
        'MainController'
    ],
    name: 'MyApp',

    launch: function() {
        var me = this;

        //CORS PROBLEM SOLVED !!!
        Ext.Ajax.setUseDefaultXhrHeader(false);

        Ext.fly('splash-page').destroy();

        Ext.create('MyApp.view.MainView', {fullscreen: true});

        document.addEventListener("deviceready", onDeviceReady, false);

        // PhoneGap is loaded and it is now safe to make calls PhoneGap methods
        function onDeviceReady() {
            document.addEventListener("backbutton", onBackKeyDown, false);
        }

        // Handle the back button
        function onBackKeyDown(e) {
            e.preventDefault();
            me.fireEvent('backButtonTap', this);
        }

   
    }

});
