/*
 * File: app/view/HistoryContainer.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.2.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.HistoryContainer', {
    extend: 'Ext.Container',
    alias: 'widget.historyContainer',

    config: {
    	cls: 'app-page',
    	layout: 'vbox',
    	items: [
    		{
    			xtype: 'container',
                action: 'allSmsCount',
    			flex: 1,
    			tpl: '<h1>foo {count}</h1>',
    			data: { count: 3}
    		},
    		{
    			xtype: 'container',
    			flex: 1,
    			html: 'bar'
    		}
    	]
    },
    initialize: function () {

        this.on('show',function(){
            this.query('container[action=allSmsCount]')[0].setData({
                count: (function () {
                    var counter = 0;
                    Ext.each(Ext.getStore('SmsCountStore').data.all, function(rec,index){
                        counter += rec.get('count');
                    });
                    return counter;
                })()
            });
        })
    }

});